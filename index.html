<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<title>OpenAI Transcriber v3.8</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icons/icon-180.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<!-- ──────────  libs  ────────── -->
<script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.17.1/dist/ort.min.js"></script>
<script>ort.env.wasm.numThreads = 1; ort.env.logLevel = 'error';</script>

<script src="https://cdn.jsdelivr.net/npm/@ricky0123/vad/dist/index.browser.js"></script>
<link  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
       rel="stylesheet"/>

<!-- ──────────  style  ────────── -->
<link rel="stylesheet" href="style.css">
</head>

<body>
<!-- トグルボタン -->
<button id="toggle">
  <i class="fas fa-bars"></i>
</button>

<!-- ── sidebar ───────────────────────── -->
<aside id="sidebar">
  <header></header>

  <nav id="menu">
    <div class="menu-item" data-act="record"><i class="fa-solid fa-microphone"></i><span>文字起こし</span></div>
    <div class="menu-item" data-act="proofread"><i class="fa-solid fa-spell-check"></i><span>校正</span></div>
    <div class="menu-item" data-act="download"><i class="fa-solid fa-copy"></i><span>コピー</span></div>
    <div class="menu-item" data-act="audio"><i class="fa-solid fa-download"></i><span>音声DL</span></div>
    <div class="menu-item" data-act="settings"><i class="fa-solid fa-gear"></i><span>設定</span></div>

    <!-- ─ history moved here ─ -->
    <div id="history">
      <div id="histHeader">履歴
        <button id="clearAll"><i class="fa-solid fa-trash"></i></button>
      </div>
      <ul id="histList"></ul>
    </div>
  </nav>
</aside>

<!-- 背景カーテン -->
<div id="backdrop"></div>

<!-- ── main ──────────────────────────── -->
<section id="main">
  <div class="section"><span id="logo">　Transcriber</span></div>
  <div class="section">
    <div id="counter"></div>        <!-- ← 復活させた残り時間表示 -->
    <div id="result" class="box"></div>
    <audio id="player" controls></audio>
  </div>
</section>

<!-- ── modal ─────────────────────────── -->
<div id="modal" class="modal">
  <div class="modal-box">
    <h3>OpenAI APIキー</h3>
    <input id="apiKey" type="password" placeholder="sk-…" />
    <button id="saveKey">保存</button>
  </div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>
